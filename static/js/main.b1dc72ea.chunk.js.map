{"version":3,"sources":["index.js"],"names":["Token","props","id","value","className","src","correctAnswer","alt","onClick","answerSelected","Card","Board","handleClick","e","btn","target","console","log","cardName","deck","state","cardNumber","document","getElementById","classList","add","setState","answer","substring","lastIndexOf","setTimeout","showAnswer","handleCardClick","updateScore","nextCardNumber","length","shuffleDeck","overlays","getElementsByClassName","forEach","el","remove","tokenName","this","tokensList","map","token","renderToken","score","React","Component","getShuffledPile","arr","newArr","slice","i","rand","Math","floor","random","getPile","pileSize","pileName","pile","push","getShuffledDeck","pileSizes","pileNames","piles","prevAnswer","j","currIndexes","CatMouseGame","bigMode","newScore","ReactDOM","render"],"mappings":"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","file":"static/js/main.b1dc72ea.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nfunction Token(props) {\n  return (\n    <div key={props.value + \"-token\"}> \n      <button id={props.value + \"-btn\"} className=\"token-btn\" >\n        <div id={props.value + \"_overlay\"} className=\"overlay\"><img id={props.value + \"_overlay\"} src={props.correctAnswer === props.value ? (\"/images/good.png\") : \"/images/bad.png\"} alt=\"result\"/></div>\n        <img id={props.value} src={\"/images/tokens/\" + props.value + \"_btn.png\"} alt={props.value} onClick={props.answerSelected ? () => {} : props.onClick}/>\n      </button>\n    </div>\n  );\n  \n}\n\nfunction Card(props) {\n  return (\n    <div className=\"card\" key={props.value + \"-card\"}> \n      <img id={props.value + \"-card\"} src={props.value} alt=\"current_card\" onClick={props.onClick}/>\n    </div>\n  );\n}\n\n\nclass Board extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cardNumber: 0,\n      answerSelected: false,\n      correctAnswer: \"\",\n      showAnswer: false,\n    };\n  }\n\n  handleClick = (e) => {\n    let btn = e.target.id;\n    console.log(\"I clicked \" + btn);\n    let cardName = this.props.deck[this.state.cardNumber];\n    const overlay = document.getElementById(btn + '_overlay');\n    overlay.classList.add('active-overlay');\n    this.setState({answerSelected: true});\n    var answer = cardName.substring(\n      cardName.lastIndexOf(\"_\") + 1, \n      cardName.lastIndexOf(\".\")\n    );\n    this.setState({correctAnswer: answer});\n    setTimeout(() => {\n      this.setState({showAnswer: true});\n    }, 500);\n    setTimeout(() => {\n      this.handleCardClick();\n    }, 3000);\n    if(btn === answer) {\n      console.log(\"I got it right!\");\n      this.props.updateScore();\n    } else {\n      console.log(\"I got it wrong!\");\n    }\n  }\n\n  handleCardClick = () => {\n    console.log(\"CHANGING CARD\");\n    let nextCardNumber = this.state.cardNumber+1;\n    if (nextCardNumber === this.props.deck.length) {\n      nextCardNumber = 0;\n      this.props.shuffleDeck();\n    }\n    this.setState({showAnswer: false, cardNumber: nextCardNumber, answerSelected: false});\n    const overlays = document.getElementsByClassName('active-overlay');\n    [...overlays].forEach((el) => el.classList.remove('active-overlay'));\n  }\n  // handleCardClick(e) {\n  //   console.log(\"CHANGING CARD\");\n  //   const nextCardNumber = this.state.cardNumber+1;\n  //   this.setState({cardNumber: nextCardNumber});\n  // }\n\n  renderToken(tokenName) {  \n    return (\n      <Token \n        value={tokenName} \n        onClick={(e) => this.handleClick(e)}\n        answerSelected={this.state.answerSelected}\n        correctAnswer={this.state.correctAnswer}\n      />\n    );\n  }\n\n  render() {\n    const tokens = [\"mouse\", \"cat\", \"cheese\", \"ball\", \"pillow\"];\n    var tokensList = tokens.map((token) => this.renderToken(token));\n\n    return (\n      <div className=\"board-row\">\n        <div className=\"game-field\">\n          <Card \n            value={\"/images/front/\" + this.props.deck[this.state.cardNumber]}\n            onClick={this.handleCardClick}\n          />\n        </div>\n        <div>\n        <div className=\"game-info\">\n          <div id=\"score\"> \n            Score: {this.props.score}\n          </div>\n          <div id=\"answer\"> \n            Correct answer:\n          </div>\n          \n          <div className=\"answer\">\n            {this.state.showAnswer ? \n            <Card \n              value={\"/images/back/\" + this.state.correctAnswer + \".png\"}\n              onClick={this.handleCardClick}\n            /> : \"\"}\n            \n          </div>\n        </div>\n        </div>\n        <div>\n          {tokensList}\n        </div>\n      </div>\n    );\n  }\n}\nconst getShuffledPile = arr => {\n  const newArr = arr.slice()\n  for (let i = newArr.length - 1; i > 0; i--) {\n      const rand = Math.floor(Math.random() * (i + 1));\n      [newArr[i], newArr[rand]] = [newArr[rand], newArr[i]];\n  }\n  return newArr\n};\n\nfunction getPile(pileSize, pileName) {\n  let pile = [];\n  for (let i = 0; i < pileSize; i++) {\n    pile.push(\"catmouse\" + (i + 1) + \"_\" + pileName + \".png\");\n  }\n  pile = getShuffledPile(pile);\n  return pile;\n}\n\nfunction getShuffledDeck() {\n  let deck = [];\n  let pileSizes = [10, 13, 11, 11, 11];\n  let deckSize = 56; // add up all pile sizes\n  let pileNames = [\"mouse\", \"cat\", \"cheese\", \"ball\", \"pillow\"];\n  let piles = [];\n  for (let i = 0; i < 5; i++) {\n    piles.push(getPile(pileSizes[i], pileNames[i]))\n  }\n  let prevAnswer = \"\";\n  let j = Math.floor(Math.random() * 5); // 0 to 4 as how many different answers\n  let currIndexes = [0, 0, 0, 0, 0];\n  for (let i = 0; i < deckSize; i++ ) {\n    while(pileNames[j] === prevAnswer) {\n      j = Math.floor(Math.random() * 5);\n    }\n    \n    deck.push(piles[j][currIndexes[j]]);\n\n    if (currIndexes[j] === piles[j].length - 1) {\n      piles[j] = getShuffledPile(piles[j]);\n    }\n    currIndexes[j] = (currIndexes[j] + 1) % piles[j].length;\n    prevAnswer = pileNames[j];\n  }\n  return deck;\n}\n\nclass CatMouseGame extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deck: getShuffledDeck(),\n      score: 0,\n      bigMode: false,\n    }\n  }\n\n  shuffleDeck() {\n    this.setState({deck: getShuffledDeck()})\n  }\n\n  updateScore() {\n    console.log(\"Updating score\");\n    let newScore = this.state.score + 1;\n    this.setState({score: newScore});\n  }\n\n  render() {\n    return (\n      <div className=\"game\">\n        <div className=\"game-board\">\n          <Board \n            deck={this.state.deck}\n            updateScore={() => this.updateScore()}\n            score={this.state.score}\n            shuffleDeck={()=> this.shuffleDeck()}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\n// ========================================\n\nReactDOM.render(\n  <CatMouseGame />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}